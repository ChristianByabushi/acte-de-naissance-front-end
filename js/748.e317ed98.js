"use strict";(self["webpackChunkproject_vue"]=self["webpackChunkproject_vue"]||[]).push([[748],{3748:function(e,s,t){t.r(s),t.d(s,{default:function(){return I}});var a=t(3694),i=t(998),r=t(6190),n=t(9582),o=t(4886),l=t(9256),c=t(1267),d=t(5125),p=t(4324),m=t(3201),u=t(3687),h=t(2540),f=t(7808),v=t(6313),w=t(7953),g=function(){var e=this,s=e._self._c;return s(i.Z,[s(h.Z,{staticClass:"d-flex justify-space-between align-center"},[s("h3",[e._v("Comptes utilisateurs")])]),s(a.Z,{attrs:{dense:"",type:"info",color:"#757575"}},[e._v(" Cette partie contient les informations sur la modification du compte")]),s(l.Z,[s(m.Z,{attrs:{"align-center":"","justify-center":""}},[s(c.Z,{attrs:{xs12:"",sm12:"",md10:""}},[s("div",[s(r.Z,{staticClass:"mb-2",on:{click:function(s){return e.changetypefonction("info")}}},[e._v("Informations")]),s(r.Z,{staticClass:"ml-2 mb-2",on:{click:function(s){return e.changetypefonction("edit")}}},[e._v("Modifier")]),s(r.Z,{staticClass:"ml-2 mb-2",on:{click:function(s){return e.changetypefonction("pwd")}}},[e._v("Changer motdepasse")])],1),"info"==e.typefonction?s(n.Z,[s(v.Z,{attrs:{dark:"",color:"#757575"}},[s(w.qW,{attrs:{"align-center":"","justify-center":""}},[e._v(" Information sur le compte en connexion ")])],1),s(o.ZB,[s(v.Z,{staticClass:"mt-4",attrs:{"align-center":"","justify-center":""}},[s("p",{staticClass:"userinfo"},[e._v("Firstname : "+e._s(e.firstname))])]),s(v.Z,{staticClass:"mt-4",attrs:{"align-center":"","justify-center":""}},[s("p",{staticClass:"userinfo"},[e._v("lastname : "+e._s(e.lastname))])]),s(v.Z,{staticClass:"mt-4",attrs:{"align-center":"","justify-center":""}},[s("p",{staticClass:"userinfo"},[e._v("Email: "+e._s(e.email))])])],1)],1):e._e(),"edit"==e.typefonction?s(n.Z,{staticClass:"elevation-6"},[s(v.Z,{attrs:{dark:"",color:"#757575"}},[s(w.qW,{attrs:{"align-center":"","justify-center":""}},[e._v(" Modification du compte en connexion ")])],1),s(o.ZB,[s(d.Z,[s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("mdi-account")]),s(f.Z,{attrs:{name:"firstname",label:"Prénom",required:"",type:"text",placeholder:"premier nom"},model:{value:e.firstname,callback:function(s){e.firstname=s},expression:"firstname"}})],1),s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("mdi-account")]),s(f.Z,{attrs:{name:"email",label:"Nom",required:"",type:"text",placeholder:"Deuxième nom"},model:{value:e.lastname,callback:function(s){e.lastname=s},expression:"lastname"}})],1),s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("mdi-email")]),s(f.Z,{attrs:{name:"email",label:"usermail",required:"",type:"text",placeholder:"email"},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}})],1),s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("lock")]),s(f.Z,{attrs:{required:"",name:"password",label:"Mot de passe",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),s(o.h7,[s(u.Z),s(r.Z,{attrs:{dense:""},on:{click:function(s){return e.editAccount()}}},[e._v("Modifier")])],1),e.msgAlert?s(a.Z,{attrs:{type:e.typeAlert}},[e._v(" "+e._s(e.msgAlert)+" ")]):e._e()],1)],1)],1):e._e(),"pwd"==e.typefonction?s(n.Z,{staticClass:"elevation-6"},[s(v.Z,{attrs:{dark:"",color:"#757575"}},[s(w.qW,{attrs:{"align-center":"","justify-center":""}},[e._v(" Changer le mot de passe ")])],1),s(o.ZB,[s(d.Z,[s(v.Z,{staticClass:"mt-4",attrs:{"align-center":"","justify-center":""}},[s("p",{staticClass:"userinfo"},[e._v("Email: "+e._s(e.email))])]),s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("lock")]),s(f.Z,{attrs:{required:"",name:"password",label:"Ancien mot de passe",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),s("div",{staticClass:"d-flex"},[s(p.Z,[e._v("lock")]),s(f.Z,{attrs:{required:"",name:"password",label:"Nouveau mot de passe",type:"password"},model:{value:e.newpassword,callback:function(s){e.newpassword=s},expression:"newpassword"}})],1),s(o.h7,[s(u.Z),s(r.Z,{attrs:{dense:""},on:{click:function(s){return e.editPwdAccount()}}},[e._v("Changer")])],1),e.msgAlert?s(a.Z,{attrs:{type:e.typeAlert}},[e._v(" "+e._s(e.msgAlert)+" ")]):e._e()],1)],1)],1):e._e()],1)],1)],1)],1)},y=[],Z=t(6546),A=t(629),_=t(9669),C=t.n(_),b={name:"Login",passwordEnable:!0,components:{alert:Z.Z},data(){return{hidepassword:"",password:"",typefonction:"info",isadmin:!1,simularpassword:"",newpassword:"",email:"",msgAlert:"",classAlert:"",activePassWord:!1,firstname:"",lastname:"",typeAlert:"info",logo:""}},props:{source:String},methods:{changetypefonction(e){this.typefonction=e,this.typeAlert="error",this.msgAlert=""},async handleSubmit(){if(""==this.password||""==this.email)return this.msgAlert="Veuillez d'abord remplir tous  les champs",void(this.classAlert="info");try{const e=new FormData;e.append("client_id",this.email),e.append("username",this.email),e.append("client_secret",this.password),e.append("password",this.password),e.append("grant_type","password");const s=await C().post("user/login",e);s.data["access_token"]?(localStorage.setItem("token",s.data["access_token"]),"/"!==this.$route.path&&this.$router.push("/")):this.msgAlert="Mot de passe ou email incorrect"}catch(e){this.msgAlert="Mot de passe ou email incorrect"}},method_activePassWord(){return""==this.activePassWord?this.logo="lock":this.logo="eye",this.activePassWord},verifyFormAdd(){return""==this.email||""==this.password||""==this.firstname||""==this.lastname?(this.msgAlert="Aucun champ ne doit etre vide !",!1):this.password!=this.simularpassword?(this.msgAlert="Vous devez saisir les mots de passe simulaires!",!1):""==this.email||""==this.firstname||""==this.lastname?(this.msgAlert="Aucun champ ne doit etre vide !",!1):void(this.password.length<8&&(this.msgAlert=" Le mot de passe doit contenir au minimum 8 caractères"))},async editPwdAccount(){if(""!=this.password&&""!=this.newpassword)if(this.password.length<8||this.newpassword.length<8)this.msgAlert=" Le mot de passe doit contenir au minimum 8 caractères";else try{const e=new FormData;e.append("password",this.password),e.append("newpassword",this.newpassword),e.append("email",this.userInfo.email),e.append("idUser",this.userInfo.id);await C().post("user/editPwdAccount",e);this.typeAlert="primary",this.msgAlert="Mot de passe changé avec succès","/login"!==this.$route.path&&this.$router.push("/login")}catch(e){console.log(e),this.msgAlert="Erreur survenue, rassurez vous que le mot de passe est correct"}else this.msgAlert=" Aucn champ de mot de passe ne ne doit etre vide!"},async addAccount(){if(0!=this.verifyFormAdd())try{const e=new FormData;e.append("firstname",this.firstname),e.append("lastname",this.lastname),e.append("password_confirm",this.simularpassword),e.append("password",this.password),e.append("email",this.email);const s=await C().post("user/editAccount",e);console.log(s.data)}catch(e){(0,Z.Z)(e)}},verifyFormEdit(){return""==this.email||""==this.password||""==this.firstname||""==this.lastname?(this.msgAlert="Aucun champ ne doit etre vide, rechargez la page pour à partir du dahsboard ou reconnectez vous !",!1):this.password.length<8?(this.typeAlert="primary",this.msgAlert=" Le mot de passe doit contenir au minimum 8 caractères",!1):void 0},async editAccount(){if(0!=this.verifyFormEdit())try{const e=new FormData;e.append("firstname",this.firstname),e.append("lastname",this.lastname),e.append("password",this.password),e.append("new_email",this.email),e.append("email",this.userInfo.email),e.append("idUser",this.userInfo.id);await C().post("user/editAccount",e);this.typeAlert="primary",this.msgAlert="Compte mise à jour avec succès","/login"!==this.$route.path&&this.$router.push("/login")}catch(e){console.log(e),this.msgAlert="Erreur survenue, rassurez vous que le mot de passe est correct"}}},mounted(){this.$store.dispatch("getInfoUser"),this.email=this.userInfo.email,this.lastname=this.userInfo.lastname,this.firstname=this.userInfo.firstname},computed:(0,A.rn)(["userInfo"]),created(){}},k=b,x=t(1001),j=(0,x.Z)(k,g,y,!1,null,"10cac0dc",null),I=j.exports},2540:function(e,s,t){t.d(s,{Z:function(){return r}});var a=t(6669),i=t(7678),r=(0,i.Z)(a.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})}}]);
//# sourceMappingURL=748.e317ed98.js.map