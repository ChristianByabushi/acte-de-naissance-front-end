"use strict";(self["webpackChunkproject_vue"]=self["webpackChunkproject_vue"]||[]).push([[52],{7440:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var a=s(3694),i=s(6190),l=s(9582),n=s(4886),c=s(266),r=s(5151),o=s(4324),d=s(1713),u=s(9730),v=s(2540),p=s(7808),m=function(){var t=this,e=t._self._c;return e("div",[e(v.Z,{staticClass:"d-flex justify-space-between align-center"},[e("h3",[t._v("Analyses")])]),e(a.Z,{attrs:{dense:"",type:"info",color:"#757575"}},[t._v(" Cette partie contient les fonctionnalités sur l'analyse du déroulement des activités et des résulats sur les stocks et les vantes ")]),e(l.Z,[e(n.EB,{staticStyle:{display:"inline"}},[t._v(" Mouvement des stocks des biens ")]),e(d.Z,{staticClass:"ml-5"},[e(c.Z,{attrs:{cols:"5",sm:"3"}},[e(u.Z,{attrs:{items:t.merchandises,"item-text":"title","item-value":"id",label:"Item à considérer"},on:{change:function(e){return t.getAllInvoices()}},model:{value:t.itemSelected,callback:function(e){t.itemSelected=e},expression:"itemSelected"}})],1),e(c.Z,{attrs:{cols:"6",sm:"4"}},[e(p.Z,{attrs:{type:"date",label:"Date à partir de laquelle commencer"},on:{change:function(e){return t.getAllInvoices()}},model:{value:t.created_at,callback:function(e){t.created_at=e},expression:"created_at"}})],1),e(c.Z,{staticClass:"mt-3",attrs:{cols:"6",sm:"4"},on:{click:t.actualiser}},[e(i.Z,{attrs:{"append-icon":""}},[e(o.Z,[t._v(" mdi-refresh ")]),t._v("Actualiser ")],1)],1)],1),e("div",{attrs:{id:"element-print-invoices"}},[(t.printDisplay=!0)?e(n.EB,[e(d.Z,[e(c.Z,[e("div",{staticStyle:{display:"inline"}},[e("h4",[t._v("Sté HumanATM")]),e("h6",{attrs:{id:"dateReport"}},[t._v("Date : "+t._s(t.created_at))])])])],1)],1):t._e(),e(n.ZB,[e(r.Z,{staticClass:"elevation-1",attrs:{headers:t.header_invoices,items:t.list_invoices,"items-per-page":7}}),e(l.Z,{staticClass:"mt-4"},[e(n.ZB,{staticStyle:{display:"inline-block"}},[e("div",[e("h5",{staticClass:"font-weight-bold"},[t._v("Calcul du résultat")])]),e("div",[e("h6",{staticClass:"font-weight-bold"},[t._v("Prix total Achat : "+t._s(t.resultatInvoices.price_by)+" ")])]),e("div",[e("h6",{staticClass:"font-weight-bold"},[t._v("Prix total Vente : "+t._s(t.resultatInvoices.price_sale)+" ")])]),e("div",[e("h6",{staticClass:"font-weight-bold"},[t._v("Résultat : "+t._s(t.resultatInvoices.result))])])])],1)],1)],1)],1),e(i.Z,{staticClass:"mt-4",attrs:{color:"error"},on:{click:function(e){t.printDisplay=!0,t.printEtatInvoices()}}},[e(o.Z,[t._v("mdi-printer")]),t._v(" Imprimer ")],1)],1)},_=[],h=s(9669),y=s.n(h),f=s(599),g=s.n(f),I={name:"analysis",data:()=>({header_invoices:[{text:"Facture Idop",value:"id_line"},{text:"Date de Vente",value:"created_at"},{text:"Item",value:"title"},{text:"PUA",value:"pu_by"},{text:"PUV",value:"pu_sale"},{text:"Qte Vendue",value:"amount_sale"},{text:"Prix Achat Total",value:"price_by"},{text:"Prix Vente Total",value:"price_sale"},{text:"Résultat",value:"result"}],list_invoices:[],created_at:(new Date).toJSON().slice(0,10).replace(/-/g,"-"),itemSelected:"",merchandises:[],resultatInvoices:[],printDisplay:!1}),methods:{async printEtatInvoices(){g()(document.getElementById("element-print-invoices"),{margin:2,filename:"Rapport stock du"+this.created_at,jsPDF:{format:"a4",orientation:"portrait"}}),this.printDisplay=!1},async getAllInvoices(){try{const t=new FormData;t.append("created_at",this.created_at),t.append("itemSelected",this.itemSelected);const e=await y().post("lineInvoice/getResultInvoices",t);this.list_invoices=e.data[0],this.resultatInvoices=e.data[1]}catch(t){console.log(t)}},async get_stock_merchandise(){try{const t=await y().post("merchandise/");this.merchandises=t.data}catch(t){alert(t)}},actualiser(){this.created_at=(new Date).toJSON().slice(0,10).replace(/-/g,"-"),this.itemSelected="",this.resultatInvoices,this.getAllInvoices()}},created(){this.getAllInvoices(),this.get_stock_merchandise()}},Z=I,x=s(1001),b=(0,x.Z)(Z,m,_,!1,null,"3a0134f2",null),k=b.exports}}]);
//# sourceMappingURL=52.5ed93c02.js.map